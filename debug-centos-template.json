{
  "variables": {
        "build_number": "{{timestamp}}"
  },

  "description": "Build base CentOS 7 x86_64",
  "provisioners": [
    {
      "type": "shell",
      "scripts": [
        "scripts/cloud-init.sh",
        "scripts/98cleanup.sh",
        "scripts/99minimize.sh"
      ],
      "override": {
        "virtualbox-iso": {
          "execute_command": "echo 'centos'|sudo -S bash '{{.Path}}'"
        }
      }

    }
  ],

  "builders": [
    {
      "vm_name": "centos-7.2-{{user `build_number`}}",
      "type": "virtualbox-iso",

      "guest_additions_mode":"disable",
      "guest_os_type": "Linux26_64",

      "output_directory": "output_packer",
      "http_directory": "http",


      "headless": false,
      "disk_size": 6000,

      "iso_url": "http://mirror.rackspace.com/CentOS/7.2.1511/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso",
      "iso_checksum": "f90e4d28fa377669b2db16cbcb451fcb9a89d2460e3645993e30e137ac37d284",
      "iso_checksum_type": "sha256",

      "ssh_username": "centos",
      "ssh_password": "centos",
      "ssh_port": 22,
      "ssh_wait_timeout": "5m",

      "shutdown_command": "echo 'centos'| sudo -S /sbin/poweroff",

      "boot_wait": "10s",
      "boot_command": [
        "<tab> text ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/debug-kickstart.cfg<enter>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>",
        "<wait10><wait10><wait10>","<wait10><wait10><wait10>"
      ],

     "hard_drive_interface": "sata",
     "vboxmanage": [
        [ "modifyvm", "{{.Name}}", "--memory", "2048" ],
        [ "modifyvm", "{{.Name}}", "--cpus", "2" ]
      ]
    }
  ]
}
